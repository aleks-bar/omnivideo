!function(t){"function"==typeof define&&define.amd?define("settings",t):t()}((function(){"use strict";function t(t,e){var n;function o(t){t.parent(".js-wpshop-settings-tabs").find("li").removeClass("active"),t.addClass("active")}function i(e){t(".js-wpshop-settings-tab").hide().promise().done((function(){e.fadeIn(250,(function(){document.dispatchEvent(new CustomEvent("wpshop_settings:show_tab_content",{detail:{tab:e.attr("id")}}))}))}))}function a(){return"undefined"!=typeof localStorage||(console.warn("Unable to use local storage in current browser"),!1)}!function(){var n=function(e){try{var n=t('.js-wpshop-settings-tabs li[data-tab="'+e+'"]'),a=t(e);if(n.length&&a.length)return o(n),i(a),!0}catch(t){console.warn(t)}return!1};if(window.location.hash.length&&n(window.location.hash))return;var s=function(t){if(a())return localStorage.getItem(t);return null}(e.storage_key);s&&n(s)}(),t(".js-wpshop-settings-color-picker").wpColorPicker({clear:function(e){t(e.target).data("custom_trigger_change")||t(e.target).trigger("change"),document.dispatchEvent(new CustomEvent("wpshop_settings_trigger_update_preview",{detail:{e:e}}))},change:function(e,o){clearTimeout(n),n=setTimeout((function(){t(e.target).trigger("change")}),200),document.dispatchEvent(new CustomEvent("wpshop_settings_color_picker_change",{detail:{e:e,ui:o}}))}}),t(document).on("click",".js-wpshop-settings-tabs li",(function(n){var s=t(n.currentTarget);if(!s.hasClass("active")){var c,r,u=s.data("tab");o(s),i(t(u)),c=e.storage_key,r=u,a()&&localStorage.setItem(c,r)}})),t(document).on("click",".js-wpshop-settings-welcome-close",(function(n){t(n.target).parent().fadeOut(150),t.ajax(ajaxurl,{data:{action:e.actions.hide_welcome}})})),t(document).on("click",".js-wpshop-settings-remove-license",(function(n){n.preventDefault(),confirm(t(n.target).data("message"))&&t.ajax(ajaxurl,{data:{action:e.actions.remove_license}}).done((function(t){t.success?window.location.reload():alert(t.data.map((function(t){return t.message})).join("\n"))}))})),t(document).on("change","input,select,textarea",(function(){var e=t(".js-wpshop-settings-container-save");e.data("handled_sticky")||(!function(t,e,n){if(!t.length)return;var o=t[0].getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight;o.top>i?e():o.bottom>i&&n()}(e.find("button"),(function(){e.hide().css("position","sticky").slideDown(200)}),(function(){e.css("position","sticky")})),e.css("position","sticky"),e.data("handled_sticky",1))}))}jQuery((function(e){t(e,window.wp_omnivideo_settings_globals||{storage_key:"wpshop-settings-tabs",actions:{}})}))}));